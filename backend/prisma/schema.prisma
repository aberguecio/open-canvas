generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Image {
  id         Int      @id @default(autoincrement())
  key        String
  bmpKey     String
  name       String
  userName   String
  userEmail  String
  isVisible  Boolean  @default(true)
  isFavorite Boolean  @default(false)
  createdAt  DateTime @default(now())
  lastQueuedAt DateTime @default(now())
  flagged    String?
}

model Scheduler {
  id         Int      @id
  nextRunAt  DateTime
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  isBanned  Boolean  @default(false)
  banReason String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Settings {
  id                       Int      @id @default(autoincrement())
  uploadLimitPerDay        Int      @default(1)
  rotationIntervalHours    Int      @default(4)
  defaultImageDurationHours Int     @default(24)
  autoBanEnabled           Boolean  @default(false)

  // Image processing settings
  ditheringEnabled         Boolean  @default(true)
  sharpenSigma             Float    @default(1.0)
  saturationMultiplier     Float    @default(1.15)
  contrastMultiplier       Float    @default(1.2)
  gamma                    Float    @default(2.2)

  updatedAt                DateTime @updatedAt
}